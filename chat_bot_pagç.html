<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ChatBot Inteligente - Calidad TI | UAEMex</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to right, #004d26, #8BC34A);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    header {
      width: 100%;
      padding: 15px 20px;
      text-align: center;
      background: rgba(0, 0, 0, 0.3);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(6px);
    }

    header h1 {
      font-size: 1.8rem;
      margin: 10px 0 5px;
      text-shadow: 1px 1px 3px #000;
    }

    header img {
      max-width: 80px;
      margin-bottom: 10px;
      border-radius: 10px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.3);
    }

    .chat-container {
      background: rgba(255,255,255,0.1);
      border-radius: 20px;
      width: 90%;
      max-width: 650px;
      padding: 20px;
      margin-top: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(10px);
    }

    .chat-box {
      max-height: 400px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
      padding: 10px;
    }

    .bot, .user {
      padding: 12px 16px;
      border-radius: 15px;
      max-width: 85%;
      animation: fadeIn 0.5s ease-in-out;
    }

    .bot { background-color: #1b5e20; align-self: flex-start; }
    .user { background-color: #dcedc8; color: #000; align-self: flex-end; }

    .options {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 20px;
    }

    .options button {
      padding: 12px;
      border: none;
      border-radius: 12px;
      background-color: #ffffff;
      color: #1b5e20;
      font-weight: bold;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    .options button:hover {
      background-color: #c5e1a5;
      transform: scale(1.03);
    }

    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(10px);}
      to {opacity: 1; transform: translateY(0);}
    }
  </style>
</head>
<body>

  <header>
    <!-- Cambia "tu-imagen.png" por el nombre real de tu archivo -->
    <img src="potro.png" alt="UAEMex Logo">
    <h1>ðŸ¤– ChatBot Inteligente - Calidad TI | UAEMex</h1>
  </header>

  <div class="chat-container">
    <div class="chat-box" id="chatBox"></div>
    <div class="options" id="options"></div>
  </div>

  <script>
  const chatBox = document.getElementById('chatBox');
  const options = document.getElementById('options');
  let nombreUsuario = localStorage.getItem('nombreActual') || '';

  const speak = (text) => {
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'es-MX';
    speechSynthesis.speak(utterance);
  };

  const printBot = (msg) => {
    const div = document.createElement('div');
    div.className = 'bot';
    div.textContent = msg;
    chatBox.appendChild(div);
    chatBox.scrollTop = chatBox.scrollHeight;
    speak(msg);
  };

  const printUser = (msg) => {
    const div = document.createElement('div');
    div.className = 'user';
    div.textContent = msg;
    chatBox.appendChild(div);
    chatBox.scrollTop = chatBox.scrollHeight;
  };

  const loadOptions = (opts) => {
    options.innerHTML = '';
    opts.forEach(opt => {
      const btn = document.createElement('button');
      btn.textContent = opt.label;
      btn.onclick = () => {
        printUser(opt.label);
        opt.action();
      };
      options.appendChild(btn);
    });
  };

  const pedirNombre = () => {
    printBot('Â¡Hola! Â¿CÃ³mo te llamas?');
    options.innerHTML = '';

    const input = document.createElement('input');
    input.placeholder = 'Escribe tu nombre';
    input.style.padding = '10px';
    input.style.borderRadius = '8px';
    input.style.border = 'none';
    input.style.marginTop = '10px';
    input.style.fontSize = '16px';
    input.style.width = '80%';

    const btn = document.createElement('button');
    btn.textContent = 'Enviar';
    btn.style.marginTop = '10px';
    btn.style.padding = '10px';
    btn.style.borderRadius = '8px';
    btn.style.border = 'none';
    btn.style.background = '#ffffff';
    btn.style.color = '#006633';
    btn.style.fontWeight = 'bold';
    btn.style.cursor = 'pointer';

    btn.onclick = () => {
      const nombre = input.value.trim();
      if (nombre !== '') {
        nombreUsuario = nombre;
        localStorage.setItem('nombreActual', nombre);
        const usuarios = JSON.parse(localStorage.getItem('usuariosChat') || '[]');
        usuarios.push(nombre);
        localStorage.setItem('usuariosChat', JSON.stringify(usuarios));
        printUser(nombre);
        printBot(`Â¡Hola, ${nombreUsuario}! Soy tu Asesor TI Virtual. Â¿En quÃ© te puedo ayudar hoy?`);
        cargarMenuPrincipal();
      } else {
        printBot('Por favor, escribe tu nombre.');
      }
    };

    options.appendChild(input);
    options.appendChild(btn);
  };

  const cargarMenuPrincipal = () => {
    loadOptions([
      { label: 'Â¿QuÃ© es un SLA?', action: showSLA },
      { label: 'Â¿QuÃ© modelo de calidad me recomiendas para TI?', action: showModelos },
      { label: 'Â¿En quÃ© se diferencian ISO 9001 e ISO 20000?', action: showDiferencias },
      { label: 'Â¿QuÃ© es ITIL 4 y cÃ³mo funciona?', action: showITIL },
      { label: 'Â¿QuÃ© es COBIT 2019 y para quÃ© sirve?', action: showCOBIT },
      { label: 'Otra pregunta', action: otraPregunta }
    ]);
  };

  const showSLA = () => {
    printBot('Un SLA (Service Level Agreement) es un acuerdo formal entre proveedor y cliente. Define niveles como disponibilidad, tiempo de respuesta y soporte. Â¿Quieres un ejemplo?');
    loadOptions([
      { label: 'SÃ­', action: () => {
        printBot('Por ejemplo, el correo debe tener 99.9% de disponibilidad y respuesta en 2h ante fallos. Â¿Quieres saber cÃ³mo se mide un SLA?');
        loadOptions([
          { label: 'SÃ­', action: () => {
            printBot('Se mide con: Uptime, tiempos promedio de respuesta, tasa de cumplimiento.');
            endOptions();
          } },
          { label: 'No', action: endOptions }
        ]);
      }},
      { label: 'No', action: endOptions }
    ]);
  };

  const showModelos = () => {
    printBot(`Depende de tus necesidades. AquÃ­ tienes:\n- ITIL 4: procesos de soporte.\n- ISO 9001: calidad general.\n- ISO 20000: gestiÃ³n TI.\n- COBIT 2019: gobierno TI.\nÂ¿Te gustarÃ­a saber mÃ¡s de alguno?`);
    loadOptions([
      { label: 'ITIL 4', action: showITIL },
      { label: 'ISO 9001', action: () => {
        printBot('ISO 9001 aplica a todo tipo de organizaciÃ³n, enfocada en satisfacciÃ³n del cliente, mejora continua y liderazgo.');
        endOptions();
      }},
      { label: 'ISO 20000', action: () => {
        printBot('ISO 20000 gestiona servicios TI como incidentes, cambios y niveles de servicio.');
        endOptions();
      }},
      { label: 'COBIT 2019', action: showCOBIT },
      { label: 'No, gracias', action: endOptions }
    ]);
  };

  const showDiferencias = () => {
    printBot('ISO 9001: calidad general. ISO 20000: servicios TI. 9001 aplica a cualquier organizaciÃ³n, 20000 se enfoca en TI.');
    loadOptions([
      { label: 'Â¿Deseas ejemplos de aplicaciÃ³n?', action: () => {
        printBot('Ej: una universidad aplica ISO 9001 para educaciÃ³n y ISO 20000 para su Ã¡rea de TI.');
        endOptions();
      }},
      { label: 'No', action: endOptions }
    ]);
  };

  const showITIL = () => {
    printBot('ITIL 4 es un marco de buenas prÃ¡cticas para gestionar servicios TI. Clave: mejora continua, entrega de valor, enfoque en cliente.');
    endOptions();
  };

  const showCOBIT = () => {
    printBot('COBIT 2019 es un marco de gobierno y gestiÃ³n de TI. Ayuda a alinear TI con los objetivos estratÃ©gicos del negocio.');
    endOptions();
  };

  const otraPregunta = () => {
    printBot('Puedes preguntar sobre auditorÃ­as, mejora continua, KPI o herramientas como ServiceNow.');
    endOptions();
  };

const endOptions = () => {
  loadOptions([
    { label: 'SÃ­, otra consulta', action: cargarMenuPrincipal },
    { label: 'No, quiero salir', action: () => {
      printBot(`Â¡Gracias por usar el ChatBot, ${nombreUsuario}!`);
      // Borramos el nombre actual
      localStorage.removeItem('nombreActual');
      nombreUsuario = '';
      loadOptions([
        { label: 'Agregar nuevo usuario', action: () => location.reload() },
        { label: 'Salir', action: () => printBot('SesiÃ³n finalizada. Â¡Hasta pronto!') }
      ]);
    }}
  ]);
};

  const start = () => {
    if (!nombreUsuario) {
      pedirNombre();
    } else {
      printBot(`Â¡Hola de nuevo, ${nombreUsuario}! Â¿En quÃ© puedo ayudarte hoy?`);
      cargarMenuPrincipal();
    }
  };

  start();
</script>
</body>
</html>
